define(["jquery","core/ajax","core/notification"],function(a,b,c){var d=function(c,d,e,f){var g=[];for(var h in f)g.push({name:h,value:f[h]});var i=a.Deferred(),j=b.call([{methodname:"core_get_fragment",args:{component:c,callback:d,contextid:e,args:g}}],!1);return j[0].done(function(a){i.resolve(a)}).fail(function(a){i.reject(a)}),i.promise()},e=function(b){b.children().each(function(b,c){var d=a(c);e(d)});var c=new Y.Node(b);b.empty(),b.remove(),c.detachAll(),c.get("childNodes")&&c.empty(),c.remove(!0)};return{fragmentAppend:function(b,f,g,h,i,j){a.when(d(b,f,g,h)).then(function(b){e(a("#fragment-html")),e(a("#fragment-scripts")),a(i).append('<div id="fragment-html">'+b.html+"</div>"),a(j).append('<div id="fragment-scripts">'+b.javascript+"</div>")}).fail(function(a){c.exception(a)})}}});